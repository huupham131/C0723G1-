<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div class="container">
    <div id="add-product">
        <button type="button" onclick="addNewStudent()">Thêm mới học viên</button>
        <button type="button" onclick="editInfoStudent()">Sửa thông tin học viên</button>
        <button type="button" onclick="deleteStudent()">Xóa học viên</button>
    </div>
    <div id="root"></div>
</div>
<script>
    class Student {
        constructor(id, name, grade, email, birthday, module) {
            this.idStudent = id;
            this.name = name;
            this.grade = grade;
            this.email = email;
            this.birthday = birthday;
            this.module = module;
        }
    }

    let student1 = new Student('HV-0001', 'Trần Anh Tuấn', 'C0823G1', 'tuantran@gmail.com', '01/01/2004', '1')
    let student2 = new Student('HV-0002', 'Phạm Thanh Hữu', 'C0723G1', 'huupham@gmail.com', '01/01/1998', '1')
    let student3 = new Student('HV-0003', 'Đàm Xuân Tưởng', 'C0723G1', 'tuongdam@gmail.com', '01/01/1997', '1')
    let studentList = [student1, student2, student3]
    tableStudent()

    function tableStudent() {
        let table = `<table border="1">
          <tr>
            <th>Mã học viên</th>
            <th>Tên</th>
            <th>Lớp</th>
            <th>Email</th>
            <th>Ngày sinh</th>
            <th>Module</th>
          </tr>`


        for (let i = 0; i < studentList.length; i++) {
            table += `<tr>
            <td>${studentList[i].idStudent}</td>
            <td>${studentList[i].name}</td>
            <td>${studentList[i].grade}</td>
            <td>${studentList[i].email}</td>
            <td>${studentList[i].birthday}</td>
            <td>${studentList[i].module}</td>
          </tr>`;
        }
        table += `</table>`;
        document.getElementById("root").innerHTML = table;
    }

    function addNewStudent() {
        let newStudentId = prompt("Nhập mã học viên: ", "HV-");
        let newName = prompt("Nhập tên học viên: ");
        let newGrade = prompt("Nhập tên lớp:");
        let newEmail = prompt("Nhập email: ");
        let newBirthday = prompt("Nhập ngày sinh: ");
        let newModule = prompt("Nhập module:")
        let newStudent = new Student(newStudentId, newName, newGrade, newEmail, newBirthday, newModule);
        studentList.push(newStudent);
        tableStudent();
    }

    function deleteStudent() {
        let deleteId = prompt('Nhập mã học viên bạn muốn xoá:', "HV-")
        let flag = false
        for (i = 0; i < studentList.length; i++) {
            if (deleteId === studentList[i].idStudent) {
                const confirmdel = confirm('Bạn có muốn xoá học viên có mã ' + deleteId + ' không?');
                if (confirmdel) {
                    flag = true
                    studentList.splice(i, 1);
                    break;
                } else {
                    return;
                }
            }
        }
        if (!flag) {
            alert('Mã học viên không tồn tại')
        }
        tableStudent();
    }

    function editInfoStudent() {
        let editId = prompt('Nhập vào mã học viên bạn muốn sửa:', "HV-");
        for (let i = 0; i < studentList.length; i++) {
            if (editId === studentList[i].idStudent) {
                studentList[i].idStudent = prompt('Nhập vào mã mới học viên:')
                studentList[i].name = prompt('Nhập vào tên học viên:')
                studentList[i].grade = prompt('Nhập vào lớp học viên:')
                studentList[i].email = prompt('Nhập vào email học viên:')
                studentList[i].birthday = prompt('Nhập vào birthday học viên:')
                studentList[i].module = prompt('Nhập vào module học viên:')
            } else {
                alert('Mã học viên không tồn tại')
                break;
            }
        }
        tableStudent();
    }

    function checkInputRequired(inputName) {
        while (true) {
            if (input !== "") {
                return input;
            } else {
                alert(` không được để trống!`);
                input = prompt(`Nhập`);
            }
        }
    }

    function checkName(inputName) {
        let input = checkInputRequired(inputName);
        let pattern = /^[a-zA-Z ]+$/;
        while (true) {
            if (pattern.test(input)) {
                return input;
            } else {
                alert(`phải là chữ cái!`);
                input = checkInputRequired(inputName);
            }
        }
    }

</script>
</body>
</html>